<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secret Puzzle | Nilabhra Chakraborty</title>

  <!-- Meta Tags -->
  <meta name="description" content="Secret Puzzle - A fun interactive experience on Nilabhra Chakraborty's portfolio." />
  <meta name="author" content="Nilabhra Chakraborty" />
  
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css">
  
  <!-- Page Specific Styles -->
  <style>
    .interactive-hero {
      min-height: 60vh;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    
    .interactive-card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .interactive-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      border-color: #f5576c;
    }
    
    .interactive-title {
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 15px;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="index.html">Nilabhra Chakraborty</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html#about">About</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#skills">Skills</a></li>
        <li class="nav-item"><a class="nav-link" href="projects.html">Projects</a></li>
        <li class="nav-item"><a class="nav-link active" href="puzzle.html">Secret Puzzle</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Hero Section -->
<section class="interactive-hero text-center py-5">
  <div class="container">
    <h1 class="display-4 fw-bold mt-5">Secret Puzzle</h1>
    <p class="lead mt-3">Can you solve the puzzle?</p>
  </div>
</section>

<!-- Secret Puzzle Section -->
<section class="section-padding">
  <div class="container">
    <div class="row g-4">
      <div class="col-lg-12">
        <div class="interactive-card">
          <h3 class="interactive-title"><i class="fas fa-magic"></i> The Ultimate Puzzle</h3>
          <div id="puzzleContainer" class="puzzle-container" style="min-height: 400px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px;">
            <!-- Step 1 -->
            <div id="step1" class="puzzle-step active">
              <h4>Welcome to the Secret Puzzle!</h4>
              <p>Think you're ready for an epic adventure?</p>
              <button class="btn btn-success btn-lg mt-4" onclick="nextStep(1)">Let's Begin!</button>
            </div>
            
            <!-- Step 2 -->
            <div id="step2" class="puzzle-step" style="display: none;">
              <h4>Step 2: The Question</h4>
              <p>What's 1 + 1?</p>
              <div class="d-flex gap-3 mt-4">
                <button class="btn btn-primary btn-lg" onclick="wrongAnswer()">3</button>
                <button class="btn btn-primary btn-lg" onclick="nextStep(2)">2</button>
                <button class="btn btn-primary btn-lg" onclick="wrongAnswer()">4</button>
              </div>
            </div>
            
            <!-- Step 3 (New) -->
            <div id="step3" class="puzzle-step" style="display: none;">
              <h4>Step 3: A Simple Riddle</h4>
              <p>I speak without a mouth and hear without ears. I have no body, but I come alive with wind. What am I?</p>
              <input type="text" id="riddleAnswer" class="form-control mt-4" placeholder="Your answer">
              <button class="btn btn-success btn-lg mt-3" onclick="checkRiddle()">Submit</button>
            </div>

            <!-- Step 4 (New) -->
            <div id="step4" class="puzzle-step" style="display: none;">
              <h4>Step 4: The Button Challenge</h4>
              <p>Click the button exactly 3 times to proceed!</p>
              <button id="clickChallengeBtn" class="btn btn-info btn-lg mt-4" onclick="handleButtonClick()">Click Me!</button>
              <p id="clickCount" class="mt-2">Clicks: 0</p>
            </div>
            
            <!-- Step 5 (Formerly Step 3) -->
            <div id="step5" class="puzzle-step" style="display: none;">
              <h4>Step 5: Almost There!</h4>
              <p>Click the button to reveal the surprise...</p>
              <button class="btn btn-warning btn-lg mt-4" onclick="nextStep(5)">Show Me!</button>
            </div>
            
            <!-- Step 6 (Formerly Step 4) -->
            <div id="step6" class="puzzle-step" style="display: none;">
              <h4>Step 6: Final Countdown</h4>
              <p id="countdown" style="font-size: 3rem; font-weight: bold;">3...</p>
            </div>
            
            <!-- Final Step -->
            <div id="puzzleFinal" class="puzzle-step" style="display: none; width: 100%;">
              <div id="surpriseMessage" style="display: none;">
                <h4>ðŸŽ‰ Surprise! ðŸ˜› ðŸŽ‰</h4>
                <p style="font-size: 1.2rem; font-weight: bold; margin: 10px 0; color: #f5576c;">you have been rickrolled!!</p>
              </div>
              <div class="mt-4" style="width: 100%; max-width: 800px; margin: 0 auto;" id="youtubeContainer">
                <!-- YouTube iframe will be dynamically added here -->
              </div>
              <div class="mt-4">
                <a href="interactive.html" class="btn btn-primary btn-lg">Back to Interactive Zone</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Contact -->
<section id="contact" class="section-padding bg-dark text-light">
  <div class="container text-center">
    <h2 class="mb-4">Contact</h2>
    <p>Email: nilabhra.work2025@gmail.com</p>
    <div class="mt-3">
      <a href="https://github.com/nilabhragit90" class="text-light me-3" target="_blank"><i class="bi bi-github"></i></a>
      <a href="https://linkedin.com/in/nilabhrachakraborty" class="text-light me-3" target="_blank"><i class="bi bi-linkedin"></i></a>
      <a href="https://twitter.com" class="text-light" target="_blank"><i class="bi bi-twitter"></i></a>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="text-center py-3 bg-black text-muted">
  Ã‚Â© 2026 Nilabhra Chakraborty
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Puzzle Challenge Scripts -->
<script>
  // Puzzle Functions
  function nextStep(step) {
    // Hide all steps
    document.querySelectorAll('.puzzle-step').forEach(step => {
      step.style.display = 'none';
    });
    
    // Show next step
    if (step === 1) {
      document.getElementById('step2').style.display = 'flex';
      document.getElementById('step2').style.flexDirection = 'column';
      document.getElementById('step2').style.alignItems = 'center';
    } else if (step === 2) {
      document.getElementById('step3').style.display = 'flex';
      document.getElementById('step3').style.flexDirection = 'column';
      document.getElementById('step3').style.alignItems = 'center';
    } else if (step === 3) { // New Step 3: Riddle
      document.getElementById('step4').style.display = 'flex';
      document.getElementById('step4').style.flexDirection = 'column';
      document.getElementById('step4').style.alignItems = 'center';
    } else if (step === 4) { // New Step 4: Button Challenge
      document.getElementById('step5').style.display = 'flex';
      document.getElementById('step5').style.flexDirection = 'column';
      document.getElementById('step5').style.alignItems = 'center';
    } else if (step === 5) { // Formerly Step 3
      document.getElementById('step6').style.display = 'flex';
      document.getElementById('step6').style.flexDirection = 'column';
      document.getElementById('step6').style.alignItems = 'center';
      
      // Countdown animation
      let countdown = 3;
      const countdownEl = document.getElementById('countdown');
      const countdownInterval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
          countdownEl.textContent = countdown + '...';
        } else {
          clearInterval(countdownInterval);
          countdownEl.textContent = '0...';
          setTimeout(() => {
            // Show final surprise
            document.querySelectorAll('.puzzle-step').forEach(step => {
              step.style.display = 'none';
            });
            document.getElementById('puzzleFinal').style.display = 'block';
            
            // Dynamically add local video element only when final step is shown
            const youtubeContainer = document.getElementById('youtubeContainer');
            if (youtubeContainer && !youtubeContainer.querySelector('video')) {
              // Ensure container has proper styling
              youtubeContainer.style.width = '100%';
              youtubeContainer.style.maxWidth = '800px';
              youtubeContainer.style.margin = '0 auto';
              youtubeContainer.style.display = 'block';
              
              const video = document.createElement('video');
              // Set explicit dimensions and styling
              video.style.width = '100%';
              video.style.height = 'auto';
              video.style.maxHeight = '450px';
              video.style.display = 'block';
              video.style.objectFit = 'cover';
              video.style.border = '0';
              
              // Set video attributes
              video.src = 'assets/videos/Rick_Astley_-_Never_Gonna_Give_You_Up_Official_Video_4K_Remaster_720p.mp4';
              video.title = 'Never Gonna Give You Up';
              video.autoplay = true;
              video.loop = true;
              video.muted = false;
              video.playsInline = true;
              video.preload = 'auto';
              
              // Append video to container
              youtubeContainer.appendChild(video);

              // Show surprise message only when video starts playing
              video.addEventListener('play', () => {
                document.getElementById('surpriseMessage').style.display = 'block';
              });
            }
          }, 500);
        }
      }, 1000);
    }
  }
  
  function wrongAnswer() {
    // Shake the step 2 container
    const step2 = document.getElementById('step2');
    step2.style.animation = 'shake 0.5s';
    
    // Reset animation
    setTimeout(() => {
      step2.style.animation = '';
    }, 500);
  }

  function checkRiddle() {
    const answerInput = document.getElementById('riddleAnswer');
    const answer = answerInput.value.trim().toLowerCase();
    if (answer === 'echo' || answer === 'wind') { // Correct answers for "I speak without a mouth..."
      nextStep(3); // Move to the next step (Step 4 in the new numbering)
    } else {
      answerInput.value = ''; // Clear input
      answerInput.placeholder = 'Try again!';
      answerInput.classList.add('is-invalid'); // Add visual feedback for wrong answer
      setTimeout(() => {
        answerInput.classList.remove('is-invalid');
      }, 1000);
    }
  }
  let clickCount = 0;
  function handleButtonClick() {
    clickCount++;
    document.getElementById('clickCount').textContent = `Clicks: ${clickCount}`;

    if (clickCount === 3) {
      nextStep(4); // Move to the next step (Step 5 in the new numbering)
      clickCount = 0; // Reset for potential re-play
    } else if (clickCount > 3) {
      // Reset if clicked more than 3 times
      clickCount = 0;
      document.getElementById('clickCount').textContent = `Clicks: ${clickCount}`;
      const clickBtn = document.getElementById('clickChallengeBtn');
      clickBtn.classList.add('btn-danger');
      setTimeout(() => {
        clickBtn.classList.remove('btn-danger');
      }, 1000);
    }
  }
</script>
</body>
</html>

